function getMapas(e){var a=$.parseJSON(e);creaMapa(a)}function creaMapa(e){function a(){var e=new google.maps.LatLngBounds;$.each(d,function(a,t){e.extend(t.position)}),r.fitBounds(e)}function t(){var e=new google.maps.LatLngBounds;$.each(p,function(a,t){e.extend(t.position)}),c.fitBounds(e)}function n(e){var a,t;return null!==typeof e&&(e.indexOf("mapa:")>-1?(a=e.split("mapa:"),t=a[1]+","+a[2]):(a=e.split("&"),$.each(a,function(e,a){a.indexOf("sll=")>-1&&(t=a.replace("sll=",""))}))),"undefined"==typeof t?-1:t}var o=[];$.each(e,function(e,a){var t=[],i=n(a.url_ubicacion),s=null==a.telefono_1?"":a.telefono_1,r=null==a.ext_1?"":" ext: "+a.ext_1,c=null==a.telefono_2?"":a.telefono_2,l=null==a.ext_2?"":" ext: "+a.ext_2,u="<h3>"+a.nombre+"</h3><h3>Dirección</h3><br /><p>"+a.calle_numero+"<br />Col. "+a.colonia+"<br />Del. "+a.delegacion+", "+a.cp+"</p><h3>Teléfonos</h3><p>"+s+r+"</p>"+"<p>"+c+l+"</p>";if(-1!=i){var d=i.split(",");t.push(u),t.push(d[0]),t.push(d[1]),o.push(t)}});for(var i,s,r=new google.maps.Map(document.getElementById("map"),{zoom:20,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,panControl:!1,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}}),c=new google.maps.Map(document.getElementById("map-movil"),{zoom:40,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,panControl:!1,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}}),l=new google.maps.InfoWindow({maxWidth:400}),u=new google.maps.InfoWindow({maxWidth:800}),d=new Array,p=new Array,m=0;m<o.length;m++)i=new google.maps.Marker({position:new google.maps.LatLng(o[m][1],o[m][2]),map:r}),s=new google.maps.Marker({position:new google.maps.LatLng(o[m][1],o[m][2]),map:c}),d.push(i),p.push(s),google.maps.event.addListener(i,"click",function(e,a){return function(){l.setContent(o[a][0]),l.open(r,e)}}(i,m)),google.maps.event.addListener(s,"click",function(e,a){return function(){u.setContent(o[a][0]),u.open(c,e)}}(s,m));a(),t()}function busquedaTS(e,a){var t,n=$.parseJSON(e),o=[],i={};$.each(n,function(e,a){o.push(a.nombre_ts),i[a.nombre_ts]=a.id_tramite_servicio}),$('.main-search-movil input[type="search"]').autocomplete({source:o,select:function(e,n){$("#ts_movil_id").val(i[n.item.value]),t=$("#ts_movil_id").attr("value"),window.open(a+"index.php/tramites_servicios/muestraInfo/"+t,"_self")},appendTo:".main-search-movil"}),$('.main-search-footer input[type="search"]').autocomplete({source:o,select:function(e,n){$("#ts_footer_id").val(i[n.item.value]),t=$("#ts_footer_id").attr("value"),window.open(a+"index.php/tramites_servicios/muestraInfo/"+t,"_self")},appendTo:".main-search-footer"}),$('.main-search-home input[type="search"]').autocomplete({source:o,select:function(e,n){$("#ts_home_id").val(i[n.item.value]),t=$("#ts_home_id").attr("value"),window.open(a+"index.php/tramites_servicios/muestraInfo/"+t,"_self")},appendTo:".main-search-home"}),$(".main-search-movil button").on("click",function(e){e.preventDefault(),t=$("#ts_movil_id").val(),window.open(a+"index.php/tramites_servicios/muestraInfo/"+t,"_self")}),$(".main-search-header button").on("click",function(e){e.preventDefault(),t=$("#ts_id").val(),window.open(a+"index.php/tramites_servicios/muestraInfo/"+t,"_self")}),$(".main-search-home button").on("click",function(e){e.preventDefault(),t=$("#ts_id").val(),window.open(a+"index.php/tramites_servicios/muestraInfo/"+t,"_self")})}function agregarTS(e,a,t){var n=$.parseJSON(e),o=[],i={};$.each(n,function(e,a){t.indexOf(a.id_tramite_servicio)<0&&(o.push(a.nombre_ts),i[a.nombre_ts]=a.id_tramite_servicio)}),$('.main-search-cms input[type="search"]').autocomplete({source:o,select:function(e,t){$("#ts_cms_id").val(i[t.item.value]);var n=$("#ts_cms_id").attr("value"),o=t.item.value;agregarTSSolicitado(n,o,a)},appendTo:".main-search-cms"}),$(".main-search button").on("click",function(e){e.preventDefault();var t=$("#ts_cms_id").val(),n=$('input[type="search"]').val();agregarTSSolicitado(t,n,a)})}function agregarTSSolicitado(e,a,t){var n={};n.id_ts=e,$.post(t+"index.php/gestor_contenidos/agregar_ts_solicitado",n,function(t){var n=$.parseJSON(t);if($(".success, .error").addClass("hide"),"success"==n.estatus){$(".success").text(n.msg),$(".success").removeClass("hide");var o='<div class="fila clearfix highlight"> 								<p class="columna xmall-10">'+a+'</p> 								<a href="" data-ts="'+e+'" class="text-center block columna xmall-2">Eliminar</a> 							</div>';$(o).insertAfter(".tabla-ts .header"),setTimeout(function(){$(".fila").removeClass("highlight")},700)}else $(".error").text(n.msg),$(".error").removeClass("hide")})}function eliminarTSSolicitado(e){$(".fila a").on("click",function(a){a.preventDefault();var t=$(this).data("ts"),n={};n.id_ts=t,$.post(e+"index.php/gestor_contenidos/eliminar_ts_solicitado",n,function(e){var a=$.parseJSON(e);$(".success, .error").addClass("hide"),$(".success").text(a.msg),$(".success").removeClass("hide")}),$(this).parent().remove()})}function agregarTSReportes(e,a){var t=$.parseJSON(e),n=[],o={};$.each(t,function(e,a){n.push(a.nombre_ts),o[a.nombre_ts]=a.id_tramite_servicio}),$('.main-search-reportes input[type="search"]').autocomplete({source:n,select:function(e,t){$("#ts_cms_id").val(o[t.item.value]);var n=$("#ts_cms_id").attr("value"),i=t.item.value;muestraReporteTS(n,i,a)},appendTo:".main-search-reportes"}),$(".main-search button").on("click",function(e){e.preventDefault();var t=$("#ts_cms_id").val(),n=$('input[type="search"]').val();muestraReporteTS(t,n,a)})}function muestraReporteTS(e,a,t){function n(){$(".visitas-mensuales").addClass("hide"),$(".feedback").addClass("hide"),$(".fila").not(".header").remove(),$(".feedback .tabla").addClass("hide"),$(".feedback #promedio").addClass("hide"),$(".visitas-mensuales canvas").remove()}function o(e){var a;switch(e){case"01":a="Enero";break;case"02":a="Febrero";break;case"03":a="Marzo";break;case"04":a="Abril";break;case"05":a="Mayo";break;case"06":a="Junio";break;case"07":a="Julio";break;case"08":a="Agosto";break;case"09":a="Septiembre";break;case"10":a="Octubre";break;case"11":a="Noviembre";break;case"12":a="Diciembre"}return a}var i={};i.id_ts=e,n(),$.post(t+"index.php/gestor_contenidos/muestra_reporte_ts",i,function(e){var a,t,n=$.parseJSON(e);$.each(n,function(e,n){"visitas"==e?a=n:t=n});var i=[],s=[],r=0;$.each(a,function(e,a){fecha_ar=a.fecha.split("-"),ano=fecha_ar[0],mes=o(fecha_ar[1]),i.push(mes+" "+ano),s.push(a.num_visitas),r+=parseInt(a.num_visitas)});var c,l=0,u=0;$.each(t,function(e,a){var t="t"==a.ayuda?"Si":"No",n='<div class="fila clearfix"> 								<div class="columna xmall-5"> 									'+a.comentarios+'								</div> 								<div class="columna xmall-2 text-center"> 									'+a.calificacion+'								</div> 								<div class="columna xmall-5 text-center"> 									'+t+"								</div> 							</div>";$(n).appendTo(".feedback .tabla"),l+=1,u+=parseInt(a.calificacion)}),c=u/l,c=c.toFixed(2),0!=r?($(".visitas-mensuales span").text(r),$(".visitas-mensuales").removeClass("hide"),$(".visitas-mensuales").append('<canvas id="chartVisitasMensuales"></canvas>'),visitasMensuales(s,i)):($(".visitas-mensuales").removeClass("hide"),$(".visitas-mensuales span").text("0")),0!=l?($(".feedback #comentarios span").text(l),$(".feedback #promedio span").text(c),$(".feedback #promedio").removeClass("hide"),$(".feedback .tabla").removeClass("hide"),$(".feedback").removeClass("hide")):($(".feedback #comentarios span").text("0"),$(".feedback #promedio span").text("-"),$(".feedback").removeClass("hide"))})}function toggleUrlAviso(){$('.crea-aviso input[name="link_aviso"]').change(function(){$(this).is(":checked")?($(".url_aviso").removeClass("hide"),$(".url_aviso input").val(""),$(".url_aviso input").focus()):($(".url_aviso").addClass("hide"),$(".url_aviso input").val("-"))})}function toggleUrlAnuncio(){$('.crea-anuncio input[name="link_anuncio"]').change(function(){$(this).is(":checked")?($(".url_anuncio").removeClass("hide"),$(".url_anuncio input").val(""),$(".url_anuncio input").focus()):($(".url_anuncio").addClass("hide"),$(".url_anuncio input").val("-"))})}function toggleSubirImagen(){$('input[name="subir_img"]').change(function(){$(this).is(":checked")?($(".cargar_img").removeClass("hide"),$(".img_actual").addClass("hide")):($(".cargar_img").addClass("hide"),$(".img_actual").removeClass("hide"))})}function votoPregunta(e){$(".pregunta a").on("click",function(a){a.preventDefault();var t={};t.pregunta=$(this).data("pregunta"),t.respuesta=$(this).data("respuesta"),$.post(e+"index.php/inicio/set_voto",t,function(){$(".pregunta").empty(),$(".pregunta").html('<h2 class="text-center highlight">¡Gracias!</h2><h4 class="text-center">Tu opinión es muy importante para nosotros.</h4>')})})}function scrollHeader(e){var a=$(window).scrollTop();if($(e).length>0){var t=$(e).offset().top,n=$(e).height(),o=t+n;a>o?$(".when-scrolled").addClass("after-scrolled"):$(".when-scrolled").removeClass("after-scrolled")}}function numRespuestasSiNo(e,a){var t={labels:["Si","No"],datasets:[{label:"Respuestas",fillColor:"rgba(236, 35, 131, 0.5)",strokeColor:"rgba(236, 35, 131, 1)",pointColor:"rgba(162, 43, 56, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(162, 43, 56, 1)",data:[e,a]}]},n=$("#chartRespuestas").get(0).getContext("2d");new Chart(n).Bar(t)}function porcentajeRespuestasSiNo(e,a){var t=[{value:parseFloat(e),color:"rgba(236, 35, 131, 0.2)",highlight:"rgba(236, 35, 131, 0.3)",label:"Si(%)"},{value:parseFloat(a),color:"rgba(236, 35, 131, 0.7)",highlight:"rgba(236, 35, 131, 0.8)",label:"No(%)"}],n=$("#donaRespuestas").get(0).getContext("2d");new Chart(n).Doughnut(t)}function visitasMensuales(e,a){var t={labels:a,datasets:[{label:"Respuestas",fillColor:"rgba(236, 35, 131, 0.5)",strokeColor:"rgba(236, 35, 131, 1)",pointColor:"rgba(162, 43, 56, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(162, 43, 56, 1)",data:e}]},n=$("#chartVisitasMensuales").get(0).getContext("2d");new Chart(n).Bar(t)}!function(e){"use strict";function a(e,a){a.slideToggle("fast")}function t(e,a){a.slideToggle("fast")}function n(a){var t=a.data("tab");e(".tabs a").removeClass("active"),a.addClass("active"),e(".tab-content").addClass("hide"),e("."+t).removeClass("hide")}function o(a){var t=a.parent(".directorio-item").find("ul");t.hasClass("hide")?(e(".directorio-item").find("ul").addClass("hide"),t.removeClass("hide")):e(".directorio-item").find("ul").addClass("hide")}function i(a,t){e.each(a,function(){var a=e(this).find(t).length;e(this).find("h2").find("span").html("("+a+")")})}function s(){p()}function r(){m()}function c(a){var t=a.parent().parent();t.fadeOut("fast",function(){e(this).addClass("hide")})}function l(){e(".overlay-wrapper").fadeIn("fast",function(){e(this).removeClass("hide")})}function u(a){var t=a.parent();t.fadeOut("fast",function(){e(this).addClass("hide")})}function d(a,t){var n=a.parent().find("> div");n.hasClass("hide")?(e(t).slideUp("fast").addClass("hide"),n.removeClass("hide").slideDown("fast")):n.slideUp("fast").addClass("hide")}function p(){if(e(".masonry-container").length>0){var a=e(".masonry-container");new Masonry(a[0],{itemSelector:".item"})}}function m(){if(e(".masonry-container").length>0){var a=e(".masonry-container"),t=new Masonry(a[0]);t.destroy()}}function f(a){var t=a.data("seccion"),n=e("article[data-seccion='"+t+"']").offset().top;n-=100,e("html, body").animate({scrollTop:n},400)}function h(){e("html, body").animate({scrollTop:0},400)}function v(a){e(a).marquee({duration:12e3,pauseOnHover:!0})}e(function(){e(".mensaje p").removeClass("hide"),v(".mensaje p"),e(".masonry-container").length>0&&p(),i(e(".letra"),"li"),e(".example-f").barrating({showSelectedRating:!1}),e(".tabs a").on("click",function(){n(e(this))}),e("body").on("click",".directorio-item > .boton",function(a){a.preventDefault(),o(e(this))}),e("body").on("click",".modal .cerrar",function(){c(e(this))}),e("body").on("click",".js-overlay-opener",function(){l(e(this))}),e("body").on("click",".overlay-wrapper .cerrar",function(){u(e(this))}),e("body").on("click",".scrollTo",function(){f(e(this))}),e("body").on("click",".back-to-top",function(){h()}),e(".menu").on("click",function(){a(e(this),e("nav"))}),e(".search").on("click",function(){t(e(this),e("header .main-search"))}),mediaCheck({media:"(min-width: 64.063em)",entry:function(){},exit:function(){},both:function(){}}),mediaCheck({media:"(min-width: 40.063em)",entry:function(){s()},exit:function(){r()},both:function(){}}),e("body").on("click",".main-content.no-large .boton",function(a){a.preventDefault(),d(e(this),".main-content.no-large article > div")}),e(".js-login-form").validate(),e(".js-validate-aviso").validate({rules:{aviso:{maxlength:140},vigencia:{date:!0}}}),e(".js-validate-pregunta").validate({rules:{vigencia:{date:!0}}}),e(".js-validate-anuncio").validate({rules:{vigencia:{date:!0}}}),e.datepicker.regional.es={closeText:"Cerrar",prevText:"<",nextText:">",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.es)})}(jQuery);