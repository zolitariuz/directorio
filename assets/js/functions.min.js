function getMapas(n){var e=$.parseJSON(n);creaMapa(e)}function creaMapa(n){function e(){var n=new google.maps.LatLngBounds;$.each(c,function(e,o){n.extend(o.position)}),a.fitBounds(n)}function o(n){var e,o;return null!==typeof n&&(n.indexOf("mapa:")>-1?(e=n.split("mapa:"),o=e[1]+","+e[2]):(e=n.split("&"),$.each(e,function(n,e){e.indexOf("sll=")>-1&&(o=e.replace("sll=",""))}))),"undefined"==typeof o?-1:o}var t=[];$.each(n,function(n,e){var i=[],a=o(e.url_ubicacion),s="<h3>"+e.nombre+"</h3><h3>Dirección</h3><br /><p>"+e.calle_numero+"<br />Col. "+e.colonia+"<br />Del. "+e.delegacion+", "+e.cp+"</p><h3>Teléfonos</h3><p>"+e.telefonos+"</p>";if(-1!=a){var c=a.split(",");i.push(s),i.push(c[0]),i.push(c[1]),t.push(i)}});for(var i,a=new google.maps.Map(document.getElementById("map"),{zoom:20,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,panControl:!1,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}}),s=new google.maps.InfoWindow({maxWidth:400}),c=new Array,r=0;r<t.length;r++)i=new google.maps.Marker({position:new google.maps.LatLng(t[r][1],t[r][2]),map:a}),c.push(i),google.maps.event.addListener(i,"click",function(n,e){return function(){s.setContent(t[e][0]),s.open(a,n)}}(i,r));e()}function busquedaTS(n){var e,o=$.parseJSON(n),t=[],i={};$.each(o,function(n,e){t.push(e.nombre_ts),i[e.nombre_ts]=e.id_tramite_servicio}),$('.main-search-header input[type="search"]').autocomplete({source:t,select:function(n,o){$("#ts_id").val(i[o.item.value]),e=$("#ts_id").attr("value"),window.open("http://localhost:8888/directorio/index.php/inicio/muestraTramiteServicio/"+e,"_self")},appendTo:".main-search-header"}),$('.main-search-home input[type="search"]').autocomplete({source:t,select:function(n,o){$("#ts_home_id").val(i[o.item.value]),e=$("#ts_home_id").attr("value"),window.open("http://localhost:8888/directorio/index.php/inicio/muestraTramiteServicio/"+e,"_self")},appendTo:".main-search-home"}),$(".main-search button").on("click",function(n){n.preventDefault(),e=$("#ts_id").val(),window.open("http://localhost:8888/directorio/index.php/inicio/muestraTramiteServicio/"+e,"_self")})}function agregarTS(n,e,o){var t=$.parseJSON(n),i=[],a={};$.each(t,function(n,e){o.indexOf(e.id_tramite_servicio)<0&&(i.push(e.nombre_ts),a[e.nombre_ts]=e.id_tramite_servicio)}),$('.main-search-cms input[type="search"]').autocomplete({source:i,select:function(n,o){$("#ts_cms_id").val(a[o.item.value]);var t=$("#ts_cms_id").attr("value"),i=o.item.value;agregarTSSolicitado(t,i,e)},appendTo:".main-search-cms"}),$(".main-search button").on("click",function(n){n.preventDefault();var o=$("#ts_cms_id").val(),t=$('input[type="search"]').val();agregarTSSolicitado(o,t,e)})}function toggleUrlAviso(){$('.crea-aviso input[name="link_aviso"]').change(function(){$(this).is(":checked")?($(".url_aviso").removeClass("hide"),$(".url_aviso input").val(""),$(".url_aviso input").focus()):($(".url_aviso").addClass("hide"),$(".url_aviso input").val("-"))})}function agregarTSSolicitado(n,e,o){var t={};t.id_ts=n,$.post(o+"index.php/gestor_contenidos/agregar_ts_solicitado",t,function(o){var t=$.parseJSON(o);if($(".success, .error").addClass("hide"),"success"==t.estatus){$(".success").text(t.msg),$(".success").removeClass("hide");var i='<div class="fila"> 									<p class="columna xmall-10">'+e+'</p> 									<a href="" data-ts="'+n+'" class="text-center block columna xmall-2">Eliminar</a> 								</div>';$(i).appendTo(".tabla-ts")}else $(".error").text(t.msg),$(".error").removeClass("hide")})}function eliminarTSSolicitado(n){$(".fila a").on("click",function(e){e.preventDefault();var o=$(this).data("ts"),t={};t.id_ts=o,$.post(n+"index.php/gestor_contenidos/eliminar_ts_solicitado",t,function(n){var e=$.parseJSON(n);$(".success, .error").addClass("hide"),$(".success").text(e.msg),$(".success").removeClass("hide")}),$(this).parent().remove()})}function toggleUrlAnuncio(){$('.crea-anuncio input[name="link_anuncio"]').change(function(){$(this).is(":checked")?($(".url_anuncio").removeClass("hide"),$(".url_anuncio input").val(""),$(".url_anuncio input").focus()):($(".url_anuncio").addClass("hide"),$(".url_anuncio input").val("-"))})}function votoPregunta(n){$(".pregunta a").on("click",function(e){e.preventDefault(),console.log(n);var o={};o.pregunta=$(this).data("pregunta"),o.respuesta=$(this).data("respuesta"),$.post(n+"index.php/inicio/set_voto",o,function(){$(".pregunta").empty(),$(".pregunta").html('<h2 class="text-center highlight">¡Gracias!</h2><h4 class="text-center">Tu opinión es muy importante para nosotros.</h4>')})})}function scrollHeader(n){var e=$(window).scrollTop();if($(n).length>0){var o=$(n).offset().top,t=$(n).height(),i=o+t;e>i?$(".when-scrolled").addClass("after-scrolled"):$(".when-scrolled").removeClass("after-scrolled")}}!function(n){"use strict";function e(n,e){e.slideToggle("fast")}function o(e){var o=e.data("tab");n(".tabs a").removeClass("active"),e.addClass("active"),n(".tab-content").addClass("hide"),n("."+o).removeClass("hide")}function t(e){var o=e.parent(".directorio-item").find("ul");o.hasClass("hide")?(n(".directorio-item").find("ul").addClass("hide"),o.removeClass("hide")):n(".directorio-item").find("ul").addClass("hide")}function i(e,o){n.each(e,function(){var e=n(this).find(o).length;console.log(e),n(this).find("h2").find("span").html("("+e+")")})}function a(){r()}function s(){c()}function c(){n(".transform h2").addClass("boton solid hero")}function r(){n(".transform h2").removeClass("boton solid hero")}function l(e){e.parent().data("content");var o=e.parent().find(".modal-to-be").html();n(".modal-content").html(o,function(){}),n(".modal-wrapper").fadeIn("fast",function(){n(this).removeClass("hide")})}function u(e){var o=e.parent().parent();o.fadeOut("fast",function(){n(this).addClass("hide")})}function d(){n(".overlay-wrapper").fadeIn("fast",function(){n(this).removeClass("hide")})}function p(e){var o=e.parent();o.fadeOut("fast",function(){n(this).addClass("hide")})}function h(){var e=n(".masonry-container");new Masonry(e[0],{itemSelector:".item"})}function f(e){var o=e.data("seccion");console.log(o);var t=n("article[data-seccion='"+o+"']").offset().top;t-=100,n("html, body").animate({scrollTop:t},400)}function m(){n("html, body").animate({scrollTop:0},400)}function v(e){n(e).marquee({duration:12e3,pauseOnHover:!0})}n(function(){n(".mensaje p").removeClass("hide"),v(".mensaje p"),n(".masonry-container").length>0&&h(),i(n(".letra"),"li"),n(".tabs a").on("click",function(){o(n(this))}),n("body").on("click",".directorio-item > .boton",function(e){e.preventDefault(),t(n(this))}),n("body").on("click",".transform .boton",function(){l(n(this))}),n("body").on("click",".modal .cerrar",function(){u(n(this))}),n("body").on("click",".js-overlay-opener",function(){d(n(this))}),n("body").on("click",".overlay-wrapper .cerrar",function(){p(n(this))}),n("body").on("click",".scrollTo",function(){f(n(this))}),n("body").on("click",".back-to-top",function(){m()}),n(".js-login-form").validate(),n(".menu").on("click",function(){e(n(this),n("nav"))}),mediaCheck({media:"(min-width: 1025px)",entry:function(){a()},exit:function(){s()},both:function(){}})})}(jQuery);