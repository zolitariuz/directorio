function getMapas(t){var e=$.parseJSON(t);creaMapa(e)}function creaMapa(t){function e(){var t=new google.maps.LatLngBounds;$.each(r,function(e,i){t.extend(i.position)}),s.fitBounds(t)}function i(t){var e,i;return null!==typeof t&&(t.indexOf("mapa:")>-1?(e=t.split("mapa:"),i=e[1]+","+e[2]):(e=t.split("&"),$.each(e,function(t,e){e.indexOf("sll=")>-1&&(i=e.replace("sll=",""))}))),"undefined"==typeof i?-1:i}var n=[];$.each(t,function(t,e){var s=[],o=i(e.url_ubicacion),a=null==e.telefono_1?"":e.telefono_1,r=null==e.ext_1?"":" ext: "+e.ext_1,l=null==e.telefono_2?"":e.telefono_2,h=null==e.ext_2?"":" ext: "+e.ext_2,c="<h3>"+e.nombre+"</h3><h3>Dirección</h3><br /><p>"+e.calle_numero+"<br />Col. "+e.colonia+"<br />Del. "+e.delegacion+", "+e.cp+"</p><h3>Teléfonos</h3><p>"+a+r+"</p>"+"<p>"+l+h+"</p>";if(-1!=o){var u=o.split(",");s.push(c),s.push(u[0]),s.push(u[1]),n.push(s)}});var s=new google.maps.Map(document.getElementById("map"),{zoom:20,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,panControl:!1,scrollwheel:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}}),o=new google.maps.InfoWindow({maxWidth:400});new google.maps.InfoWindow({maxWidth:800});var a,r=new Array;new Array;for(var l=0;l<n.length;l++)a=new google.maps.Marker({position:new google.maps.LatLng(n[l][1],n[l][2]),map:s}),r.push(a),google.maps.event.addListener(a,"click",function(t,e){return function(){o.setContent(n[e][0]),o.open(s,t)}}(a,l));e()}function busquedaTS(t,e){var i,n=$.parseJSON(t),s=[],o={};$.each(n,function(t,e){s.push(e.nombre_ts),o[e.nombre_ts]=e.id_tramite_servicio}),$('.main-search-movil input[type="search"]').autocomplete({source:s,select:function(t,n){$("#ts_movil_id").val(o[n.item.value]),i=$("#ts_movil_id").attr("value"),window.open(e+"index.php/tramites_servicios/muestraInfo/"+i,"_self")},appendTo:".main-search-movil"}),$('.main-search-footer input[type="search"]').autocomplete({source:s,select:function(t,n){$("#ts_footer_id").val(o[n.item.value]),i=$("#ts_footer_id").attr("value"),window.open(e+"index.php/tramites_servicios/muestraInfo/"+i,"_self")},appendTo:".main-search-footer"}),$('.main-search-home input[type="search"]').autocomplete({source:s,select:function(t,n){$("#ts_home_id").val(o[n.item.value]),i=$("#ts_home_id").attr("value"),window.open(e+"index.php/tramites_servicios/muestraInfo/"+i,"_self")},appendTo:".main-search-home"}),$(".main-search-movil button").on("click",function(t){t.preventDefault(),i=$("#ts_movil_id").val(),"undefined"!=typeof i&&window.open(e+"index.php/tramites_servicios/muestraInfo/"+i,"_self")}),$(".main-search-header button").on("click",function(t){t.preventDefault(),i=$("#ts_id").val(),"undefined"!=typeof i&&window.open(e+"index.php/tramites_servicios/muestraInfo/"+i,"_self")}),$(".main-search-home button").on("click",function(t){t.preventDefault(),i=$("#ts_id").val(),"undefined"!=typeof i&&window.open(e+"index.php/tramites_servicios/muestraInfo/"+i,"_self")})}function agregarTS(t,e,i){var n=$.parseJSON(t),s=[],o={};$.each(n,function(t,e){i.indexOf(e.id_tramite_servicio)<0&&(s.push(e.nombre_ts),o[e.nombre_ts]=e.id_tramite_servicio)}),$('.main-search-cms input[type="search"]').autocomplete({source:s,select:function(t,i){$("#ts_cms_id").val(o[i.item.value]);var n=$("#ts_cms_id").attr("value"),s=i.item.value;agregarTSSolicitado(n,s,e)},appendTo:".main-search-cms"}),$(".main-search button").on("click",function(t){t.preventDefault();var i=$("#ts_cms_id").val(),n=$('input[type="search"]').val();agregarTSSolicitado(i,n,e)})}function agregarTSSolicitado(t,e,i){var n={};n.id_ts=t,$.post(i+"index.php/gestor_contenidos/agregar_ts_solicitado",n,function(i){var n=$.parseJSON(i);if($(".success, .error").addClass("hide"),"success"==n.estatus){$(".success").text(n.msg),$(".success").removeClass("hide");var s='<div class="fila clearfix highlight"> 								<p class="columna xmall-10">'+e+'</p> 								<a href="" data-ts="'+t+'" class="text-center block columna xmall-2">Eliminar</a> 							</div>';$(s).insertAfter(".tabla-ts .header"),setTimeout(function(){$(".fila").removeClass("highlight")},700)}else $(".error").text(n.msg),$(".error").removeClass("hide")})}function eliminarTSSolicitado(t){$(".fila a").on("click",function(e){e.preventDefault();var i=$(this).data("ts"),n={};n.id_ts=i,$.post(t+"index.php/gestor_contenidos/eliminar_ts_solicitado",n,function(t){var e=$.parseJSON(t);$(".success, .error").addClass("hide"),$(".success").text(e.msg),$(".success").removeClass("hide")}),$(this).parent().remove()})}function agregarTSReportes(t,e){var i=$.parseJSON(t),n=[],s={};$.each(i,function(t,e){n.push(e.nombre_ts),s[e.nombre_ts]=e.id_tramite_servicio}),$('.main-search-reportes input[type="search"]').autocomplete({source:n,select:function(t,i){$("#ts_cms_id").val(s[i.item.value]);var n=$("#ts_cms_id").attr("value"),o=i.item.value;muestraReporteTS(n,o,e)},appendTo:".main-search-reportes"}),$(".main-search button").on("click",function(t){t.preventDefault();var i=$("#ts_cms_id").val(),n=$('input[type="search"]').val();muestraReporteTS(i,n,e)})}function muestraReporteTS(t,e,i){function n(){$(".visitas-mensuales").addClass("hide"),$(".feedback").addClass("hide"),$(".fila").not(".header").remove(),$(".feedback .tabla").addClass("hide"),$(".feedback #promedio").addClass("hide"),$(".visitas-mensuales canvas").remove()}function s(t){var e;switch(t){case"01":e="Enero";break;case"02":e="Febrero";break;case"03":e="Marzo";break;case"04":e="Abril";break;case"05":e="Mayo";break;case"06":e="Junio";break;case"07":e="Julio";break;case"08":e="Agosto";break;case"09":e="Septiembre";break;case"10":e="Octubre";break;case"11":e="Noviembre";break;case"12":e="Diciembre"}return e}var o={};o.id_ts=t,n(),$.post(i+"index.php/gestor_contenidos/muestra_reporte_ts",o,function(t){var e,i,n=$.parseJSON(t);$.each(n,function(t,n){"visitas"==t?e=n:i=n});var o=[],a=[],r=0;$.each(e,function(t,e){fecha_ar=e.fecha.split("-"),ano=fecha_ar[0],mes=s(fecha_ar[1]),o.push(mes+" "+ano),a.push(e.num_visitas),r+=parseInt(e.num_visitas)});var l,h=0,c=0;$.each(i,function(t,e){var i="t"==e.ayuda?"Si":"No",n='<div class="fila clearfix"> 								<div class="columna xmall-5"> 									'+e.comentarios+'								</div> 								<div class="columna xmall-2 text-center"> 									'+e.calificacion+'								</div> 								<div class="columna xmall-2 text-center"> 									'+e.servicio+'								</div> 								<div class="columna xmall-3 text-center"> 									'+i+"								</div> 							</div>";$(n).appendTo(".feedback .tabla"),h+=1,c+=parseInt(e.calificacion)}),l=c/h,l=l.toFixed(2),0!=r?($(".visitas-mensuales span").text(r),$(".visitas-mensuales").removeClass("hide"),$(".visitas-mensuales").append('<canvas id="chartVisitasMensuales"></canvas>'),visitasMensuales(a,o)):($(".visitas-mensuales").removeClass("hide"),$(".visitas-mensuales span").text("0")),0!=h?($(".feedback #comentarios span").text(h),$(".feedback #promedio span").text(l),$(".feedback #promedio").removeClass("hide"),$(".feedback .tabla").removeClass("hide"),$(".feedback").removeClass("hide")):($(".feedback #comentarios span").text("0"),$(".feedback #promedio span").text("-"),$(".feedback").removeClass("hide"))})}function toggleUrlAviso(){$('.crea-aviso input[name="link_aviso"]').change(function(){$(this).is(":checked")?($(".url_aviso").removeClass("hide"),$(".url_aviso input").val(""),$(".url_aviso input").focus()):($(".url_aviso").addClass("hide"),$(".url_aviso input").val("-"))})}function toggleUrlAnuncio(){$('.crea-anuncio input[name="link_anuncio"]').change(function(){$(this).is(":checked")?($(".url_anuncio").removeClass("hide"),$(".url_anuncio input").val(""),$(".url_anuncio input").focus()):($(".url_anuncio").addClass("hide"),$(".url_anuncio input").val("-"))})}function toggleSubirImagen(){$('input[name="subir_img"]').change(function(){$(this).is(":checked")?($(".cargar_img").removeClass("hide"),$(".img_actual").addClass("hide")):($(".cargar_img").addClass("hide"),$(".img_actual").removeClass("hide"))})}function votoPregunta(t){$(".pregunta a").on("click",function(e){e.preventDefault();var i={};i.pregunta=$(this).data("pregunta"),i.respuesta=$(this).data("respuesta"),$.post(t+"index.php/inicio/set_voto",i,function(){$(".pregunta").empty(),$(".pregunta").html('<h2 class="text-center highlight">¡Gracias!</h2><h4 class="text-center">Tu opinión es muy importante para nosotros.</h4>')})})}function scrollHeader(t){var e=$(window).scrollTop();if($(t).length>0){var i=$(t).offset().top,n=$(t).height(),s=i+n;e>s?$(".when-scrolled").addClass("after-scrolled"):$(".when-scrolled").removeClass("after-scrolled")}}function numRespuestasSiNo(t,e){var i={labels:["Si","No"],datasets:[{label:"Respuestas",fillColor:"rgba(236, 35, 131, 0.5)",strokeColor:"rgba(236, 35, 131, 1)",pointColor:"rgba(162, 43, 56, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(162, 43, 56, 1)",data:[t,e]}]},n=$("#chartRespuestas").get(0).getContext("2d");new Chart(n).Bar(i)}function porcentajeRespuestasSiNo(t,e){var i=[{value:parseFloat(t),color:"rgba(236, 35, 131, 0.2)",highlight:"rgba(236, 35, 131, 0.3)",label:"Si(%)"},{value:parseFloat(e),color:"rgba(236, 35, 131, 0.7)",highlight:"rgba(236, 35, 131, 0.8)",label:"No(%)"}],n=$("#donaRespuestas").get(0).getContext("2d");new Chart(n).Doughnut(i)}function visitasMensuales(t,e){var i={labels:e,datasets:[{label:"Respuestas",fillColor:"rgba(236, 35, 131, 0.5)",strokeColor:"rgba(236, 35, 131, 1)",pointColor:"rgba(162, 43, 56, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(162, 43, 56, 1)",data:t}]},n=$("#chartVisitasMensuales").get(0).getContext("2d");new Chart(n).Bar(i)}function imprimirInfoTramite(){$(".j-imprimir").on("click",function(t){t.preventDefault(),window.print()})}!function(t){"use strict";function e(t,e){e.slideToggle("fast")}function i(t,e){e.slideToggle("fast")}function n(e){var i=e.data("tab");t(".tabs a").removeClass("active"),e.addClass("active"),t(".tab-content").addClass("hide"),t("."+i).removeClass("hide")}function s(e){var i=e.parent(".directorio-item").find("ul");i.hasClass("hide")?(t(".directorio-item").find("ul").addClass("hide"),i.removeClass("hide")):t(".directorio-item").find("ul").addClass("hide")}function o(e,i){t.each(e,function(){var e=t(this).find(i).length;t(this).find("h2").find("span").html("("+e+")")})}function a(){d()}function r(){p()}function l(e){var i=e.parent().parent();i.fadeOut("fast",function(){t(this).addClass("hide")})}function h(){t(".overlay-wrapper").fadeIn("fast",function(){t(this).removeClass("hide")})}function c(e){var i=e.parent();i.fadeOut("fast",function(){t(this).addClass("hide")})}function u(e,i){var n=e.parent().find("> div");n.hasClass("hide")?(t(i).slideUp("fast").addClass("hide"),n.removeClass("hide").slideDown("fast")):n.slideUp("fast").addClass("hide")}function d(){if(t(".masonry-container").length>0){var e=t(".masonry-container");new Masonry(e[0],{itemSelector:".item"})}}function p(){if(t(".masonry-container").length>0){var e=t(".masonry-container"),i=new Masonry(e[0]);i.destroy()}}function f(e){var i=e.data("seccion"),n=t("[data-seccion='"+i+"']").offset().top;n-=100,t("html, body").animate({scrollTop:n},400)}function g(){t("html, body").animate({scrollTop:0},400)}function m(e){t(e).marquee({duration:12e3,pauseOnHover:!0})}t(function(){t(".mensaje p").removeClass("hide"),m(".mensaje p"),t(".masonry-container").length>0&&d(),o(t(".letra"),"li"),t(".example-f").barrating({showSelectedRating:!1}),t(".tabs a").on("click",function(){n(t(this))}),t("body").on("click",".directorio-item > .boton",function(e){e.preventDefault(),s(t(this))}),t("body").on("click",".modal .cerrar",function(){l(t(this))}),t("body").on("click",".js-overlay-opener",function(){h(t(this))}),t("body").on("click",".overlay-wrapper .cerrar",function(){c(t(this))}),t("body").on("click",".scrollTo",function(){f(t(this))}),t("body").on("click",".back-to-top",function(){g()}),t(".menu").on("click",function(){e(t(this),t("nav"))}),t(".search").on("click",function(){i(t(this),t("header .main-search"))}),mediaCheck({media:"(min-width: 64.063em)",entry:function(){},exit:function(){},both:function(){}}),mediaCheck({media:"(min-width: 40.063em)",entry:function(){a()},exit:function(){r()},both:function(){}}),t("body").on("click",".main-content.no-large .boton",function(e){e.preventDefault(),u(t(this),".main-content.no-large article > div")}),t(".js-login-form").validate(),t(".js-validate-aviso").validate({rules:{aviso:{maxlength:140},vigencia:{date:!0}}}),t(".js-validate-pregunta").validate({rules:{vigencia:{date:!0}}}),t(".js-validate-anuncio").validate({rules:{vigencia:{date:!0}}}),t.datepicker.regional.es={closeText:"Cerrar",prevText:"<",nextText:">",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional.es)})}(jQuery);